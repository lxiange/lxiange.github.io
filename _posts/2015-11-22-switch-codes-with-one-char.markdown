---
layout: post
title:  "改变一个字符选择两个代码块"
date:   2015-11-22 15:49:09 +0800
tags: [C, Python]
categories: coding
---
在编程时，有时要测试两个代码块。
一般粗鲁点的做法就是注释掉其中一个，如果需要另一个时再将当前这块代码注释掉，并取注另一块代码。

当然，据我所知，在C语言中比较优雅点的做法是用`#ifndef`宏，
然后自己定义个宏变量，这样就可以在预处理阶段对代码进行处理。

前阵子看了自己写的一段Python代码，突然发现自己偶然间“创造”了一个比较有趣的写法。

因为Python块注释符是`'''`，不区分这个三引号是开始还是结束符，
因此可以这么写：
```Python
#'''
for i in range(3):
    print('111111111')
'''
for i in range(3):
    print('222222222')
#'''
```

显然，第一个`#`就是“开关”，因为绝大多数语言的注释都是非嵌套的，所以行注释符就被“吞掉了”，
从而达到这个有趣的结果：每次只要删除或保留第一个`#`，即可选择两个不同的代码块。

C语言的块注释符是区分开始还是结束的，是不是不能这么玩了呢？

仔细思考一番后，发现C语言也是可以这么玩的！核心就在于C语言的行注释符`//`和块注释符`/*`有一个共同的字符`/`。

所以代码如下：
```C
//*
printf("111\n");
/*/
printf("222\n");
// */
```
[View it on Gist](https://gist.github.com/lxiange/0a49da53224068e1e0a9)

同样，第一个`/`为“开关”。

*要注意的是，第一行的`//`和`*`之间不能有空格（用cpplint检查程序时都会让注释符后空一格）*

当然，这种“Trick”在实际项目中是没有意义也是不提倡的，但是在那些一次性代码中，这么写有时还是挺方便的 XD

- 并且你的代码编辑器还得有**正确**的代码高亮功能！
你用Sublime Text打开谷歌提供的cpplint.py，从4684行开始。
你就知道我为何要强调正确这两个字了 :P